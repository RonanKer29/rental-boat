<div class="container my-5">
  <div class="row">
    <!-- Colonne du formulaire de modification -->
    <div class="col-md-6">
      <div class="form-home text-center mb-5">
        <h3>Update Booking</h3>
        <p class="lead">Please fill in the details to update your booking.</p>
      </div>

      <%= form_for @booking, html: { class: 'needs-validation', novalidate: "" } do |f| %>
        <div class="mb-3">
          <%= f.label :start_date, class: 'form-label' %>
          <%= f.date_field :start_date, class: 'form-control', required: true %>
        </div>

        <div class="mb-3">
          <%= f.label :end_date, class: 'form-label' %>
          <%= f.date_field :end_date, class: 'form-control', required: true %>
        </div>

        <div class="mb-3">
          <%= f.label :comment, 'Comment (optional)', class: 'form-label' %>
          <%= f.text_area :comment, rows: 3, class: 'form-control' %>
        </div>

        <div class="actions text-center">
          <%= f.submit 'Update my booking', class: 'btn btn-primary' %>
        </div>
      <% end %>
    </div>

<div class="col-md-6">
  <div class="details-changes mt-5">
    <h4>Booking Changes</h4>
    <% @booking.versions.each do |version| %>
      <% booking_before_change = version.reify %>
      <div class="change-record">
        <p><strong>Changed on:</strong> <%= version.created_at.strftime("%d/%m/%Y %H:%M") %></p>

        <% if booking_before_change %>
          <% version.changeset.each do |key, value| %>
            <% if key == 'start_date' || key == 'end_date' || key == 'total_amount' %>
              <p><strong><%= key.titleize %>:</strong> from <%= value.first %> to <%= value.last %></p>
            <% end %>
          <% end %>
        <% else %>
          <p>This is the creation of the booking.</p>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
  </div>
</div>
